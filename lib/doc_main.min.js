window.W||(window.W=new Array,W.$modules=[]),W.$modules.push(function(e,t,n){function o(e){var t=document.createElement("a");return t.href=e,""==t.host&&(t.href=t.href),t}function i(e){var t="//rewgt.github.io/blogs/output/repo_issue.json";k.ajax({type:"GET",url:t,dataType:"json",success:function(t,n,o){e(t)},error:function(e,n){console.log("error: load "+t+" failed")}})}function a(e){if(e&&S&&T){var t=b[L];if(t){t[0];var n=t[1].find(function(t){return t.keyId===e});if(n){var o=n.path.split("/").pop(),i=t[0],a=t[3],l=a+"index.html?page="+encodeURIComponent(o);"number"==typeof n.create_at&&(l+="&tm="+n.create_at),_&&(l+="&token="+_),S.duals.src=l,T.duals.style={visibility:"hidden"},x.state={repo:a,repoDesc:i.repos_desc,category:j,doc:n,url:l},r(!0)}}}}function l(e){if(D&&W){var t,n=W.getHtmlNode();if(!(!n||(t=n.selectedIndex)<0||t>=b.length)){var o=b[t],i=o[1],l=o[3];o=o[0],x.state={repo:l,repoDesc:o.repos_desc,category:j,doc:null,url:""};var r;j==w?r=i:(r=[],i.forEach(function(e){e.category==j&&r.push(e)})),D.duals.data=r,e&&setTimeout(function(){a(e.keyId)},100)}}}function r(e){O&&k.eachComponent(O,function(t){var n,o=t.duals["data-show"];n="on_both"==o?"inline":!e==("on_list"==o)?"inline":"none",t.duals.style={display:n}})}function s(e,t){function n(){var e=b[L];return e?e[3]:""}function o(e){e.stopPropagation(),a(e.target.getAttribute("name"))}function i(e){return e.getYear()%100+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()}function r(e){e.stopPropagation();var t=e.target.getAttribute("name");t&&t!=j&&A&&(A.duals.cates.indexOf(t)<0||(j=t,l(),A.reRender()))}function s(e){e.stopPropagation();var t=e.target.getAttribute("name");if(t){var n=b[L];if(n){var o=n[1].find(function(e){return e.keyId===t});if(o){var i=n[3]+"$proxy.html?url=",a=o.path.split("/").pop();o.markdown?i+="output%2Fmark_editor.html":i+="output%2Fpage_editor.html",i+="&page="+encodeURIComponent(a),window.open(i,"_blank")}}}}if(e<=2)1==e?(D=this,this.defineDual("data")):0==e&&(D=null);else{var d=this.state.parentWidth,u=void 0,c=d>=480?480:d>300?.9:270,h=(this.state.data||[]).map(function(e){var t=e.keyId,a=e.thumb,l=e.title||t;a?0!=a.search(H)&&(void 0===u&&(u=n()),a=u+a):a=e.markdown?"lib/res/pinp_blog.jpg":"lib/res/slideshow.jpg";var d=["P",{key:"thumb",klass:"start-end-stretch-default-self_center",width:150,height:120}];d=[d,["Img",{key:"img",name:t,src:a,style:{cursor:"pointer",width:"100%",height:"100%",borderRadius:"3px"},$onClick:o}]];var h=[["Panel",{key:"ctx",klass:"self_center-start-end-stretch-default p2-p3-p0-p1",width:-1,height:null,padding:[0,16,0,10],style:{textAlign:"left",color:"#444"}}],["P",{key:"titl",name:t,width:.9999,margin:0,$onMouseOver:function(e){this.duals.style={textDecoration:"underline"}},$onMouseOut:function(e){this.duals.style={textDecoration:"none"}},$onClick:o,style:{cursor:"pointer",fontWeight:"600"},"html.":l}]];e.desc&&e.desc.split("<br>").forEach(function(e,t){e&&h.push(["P",{key:"desc"+t,klass:"small-default-large",width:.9999,margin:[6,0,0,0],style:{color:"#555"},"html.":e}])});var p=[["P",{key:"info",klass:"small-default-large",width:.9999,margin:[8,0,2,0],style:{color:"#777"}}]];P&&0==L&&p.push(["Button",{key:"edit",name:t,style:{margin:"0 4px 0 0"},$onClick:s,"html.":"Edit"}]),e.category!=w&&e.category!=j&&p.push(["Span",{key:"cate",name:e.category,style:{margin:"0 4px 0 0",padding:"1px 3px",border:"1px solid #faa",borderRadius:"3px",cursor:"default"},$onMouseOver:function(e){this.duals.style={backgroundColor:"#fff4f4"}},$onMouseOut:function(e){this.duals.style={backgroundColor:""}},$onClick:r,"html.":e.category}]),p.push(["Span",{key:"modi","html.":i(new Date(e.modify_at)),title:e.path.split("/").pop(),style:{cursor:"default"}}]),h.push(p);var f=[["Panel",{key:t,width:c,height:null,padding:[6,0,6,0],borderWidth:[1,0,0,0],style:{borderColor:"#eee"}}],d,h];return k.loadElement(f)}),p=d>=480?Math.floor(d/480):1;if(p>=2)for(var f=h.length%p;f>0;)f-=1,h.push(k.loadElement(["Panel",{key:"_pad"+f,width:c,height:120,borderWidth:[1,0,0,0],style:{borderColor:"#eee"}}]));k.setChildren(this,h)}}function d(e,t){e<=2?1==e?(A=this,this.firstShow=!0,this.setEvent({$onClick:function(e){var t=e.target;if("BUTTON"==t.nodeName){var n=t.getAttribute("name");n&&(T&&(T.duals.style={visibility:"visible"}),x.state.doc=null,x.state.url="",r(!1),j!=n&&(j=n,R&&R.setItem("lastCate",n),l(),this.reRender()))}}}),this.defineDual("cates",function(e,t){var n=this.state.cates;n.length||n.push(w);var o=null;if(this.firstShow){if(this.firstShow=!1,I.doc){var i=decodeURIComponent(I.doc),a=i.split("/"),r=(i=a.pop()).split(".");r.length>=2&&r.pop(),r.push("txt"),0==a.length&&a.push("md"),a.push(r.join(".")),i=a.join("/"),(o=b[0][1].find(function(e){return e.path===i}))&&(j=o.category)}o||(I.cate?j=decodeURIComponent(I.cate):R&&(j=R.getItem("lastCate")||w))}n.indexOf(j)<0&&(j=n[n.length-1]),setTimeout(l,0,o)},[w])):0==e&&(A=null):k.setChildren(this,this.state.cates.map(function(e,t){var n={key:"cate"+t,"html.":e,name:e,style:{color:e==j?"#c00":"#444"}};return k.loadElement(["Button",n])}))}function u(e,t,n){var o=(e.doc_list||[]).slice(0);o.forEach(function(e){var t=(e.tag||"").split("."),n=t[0],o=w;t.length>=2&&(o=t[1]);var i=e.path.split("/").pop().split(".");i.length>1&&i.pop();var a=i.join("_");e.category=o,e.sortName=n+a,e.keyId=a.replace(/-/g,"_")});for(var i=o.length-1;i>=0;i--)o[i].hidden&&o.splice(i,1);o.sort(function(e,t){return e.sortName>t.sortName?-1:1}),b.push([e,o,t,n])}function c(e,t){function n(e){U+=1,e.forEach(function(e){var t=e[0],n=e[1];if(t){"/"!=t.slice(-1)&&(t+="/");var o=t,a=U;t+="config.json",k.ajax({type:"GET",url:t,dataType:"json",success:function(e,t,l){U===a&&(n||(n=e.repos_desc||e.repos_name),u(e,n,o),setTimeout(i,0))},error:function(e,n){U===a&&console.log("error: load config ("+t+") failed")}})}})}function o(){var e,t=W.getHtmlNode();if(t&&!((e=t.selectedIndex)<0)&&A&&L!=e){if(e>=b.length)return;var n=[w],o=b[e];o[0];o[1].forEach(function(e){n.indexOf(e.category)<0&&n.unshift(e.category)}),j=w,L=e,A.duals.cates=n}}function i(){if(W){var e=b.map(function(e){return e[2]});W.duals.data=e,!P&&0==L&&b.length>=2&&0==b[0][1].length&&b[1][1].length>0&&setTimeout(function(){var e=W.getHtmlNode();!e||e.selectedIndex<0||(e.selectedIndex=1,o())},300)}}if(e<=2)1==e?(W=this,this.setEvent({$onChange:function(e){o()}})):2==e?setTimeout(function(){o(),n(b[0][0].imported_repos||[])},100):0==e&&(W=null);else{var a=this.state.data||[];k.setChildren(this,a.map(function(e,t){var n="repo_"+t;return k.loadElement(["Option",{key:n,value:n,"html.":e}])}))}}function h(e,t){if(e<=2)if(1==e){M=this;var n=8,o=[["Div",{key:"menu",klass:"noselect-txt",width:150,padding:2,borderWidth:1,style:{fontSize:"14px",borderColor:"#eee",borderRadius:"4px",boxShadow:"-2px 8px 4px rgba(0,0,0,0.1)"}}]];x.menus.forEach(function(e,t){o.push(["P",{key:"menu"+t,width:.9999,height:20,margin:0,padding:[0,8,0,8],style:{overflow:"hidden",cursor:"default"},"html.":e.title,$onMouseOver:function(e){this.duals.style={backgroundColor:"blue",color:"#fff"}},$onMouseOut:function(e){this.duals.style={backgroundColor:"",color:""}},$onClick:e.onClick}]),n+=20}),this.menuBody=k.loadElement(o),this.menuFrame=k.loadElement(["Div",{width:150,height:n}]),this.setEvent({$onMouseOver:function(e){this.duals.style={backgroundColor:"#e4e4e4"}},$onMouseOut:function(e){this.duals.style={backgroundColor:"transparent"}},$onClick:function(e){var t=e.clientX,o=e.clientY;k.popWin.showWindow(this.menuBody,{left:t+2,top:o+2,width:150,height:n,maskColor:"transparent",bodyStyle:{backgroundColor:"#f4f4f4"},frame:{left:t+2,top:o+2,width:150,height:n},frameElement:this.menuFrame})}})}else 2==e?setTimeout(function(){M&&P&&(M.duals.style={display:"block"})},300):0==e&&(M=null);else;}function p(e,t,n){function o(){if(this.config={},window.localStorage){this.canSave=!0;var e=localStorage.getItem(i);if(e)try{this.config=JSON.parse(e)}catch(e){}}else this.canSave=!1}var i="pinp/blogs/cfg";o.prototype={setItem:function(e,t){this.config[e]=t,this.canSave&&localStorage.setItem(i,JSON.stringify(this.config))},getItem:function(e){return this.config[e]}},R=new o,P=e.isLocal,I=t,k.ajax({type:"GET",url:"config.json",dataType:"json",success:function(e,t,o){C(e,function(){e.homepage&&setTimeout(function(){var t=e.homepage.split("/").pop().split(".");t.length>1&&t.pop(),a(t.join("_").replace(/-/g,"_"))},100),n()})},error:function(e,t){var o="error: load config.json failed";console.log(o),alert(o),n&&n()}})}function f(e){try{"object"==typeof e&&e.data?(e=e.data,e=JSON.parse(e.slice(14))):e=null}catch(t){e=null,console.log(t)}if("object"==typeof e){var t;if("markScroll"==e.method){if(N){var n=e.param[0],o=n<=6?"flex":B<n?"none":"flex";B=n,N.duals.style={display:o}}}else if("enterPage"==e.method){if(N){var i=e.param[0];N.duals.style={display:0==i?"flex":"none"}}}else(t=x.msgHandle[e.method])&&t(e)}}function m(e,t){function n(e){F||((F=document.createElement("link")).rel="stylesheet",F.type="text/css",F.href="lib/comments.css",document.body.appendChild(F));var t=G.props.vendor,n=k.gitOf("api.github.com","https");n.siteAuth="Basic "+e.token;var i=new n.User(t),a=new n.Branch(i,G.props.repo,"gh-pages"),l=G.props.fileTime||0;"number"==typeof l?(l-=864e5)<0&&(l=0):l=0;var r=new Date(l).toISOString();a.fetchIssues(function(e){if(!e){for(var n=G.props.fileId,i=0,l=a.issues.length,r=null;i<l;){var s=a.issues[i++];if(0==(s.title||"").indexOf(n)){r=s;break}}r&&(J="https://github.com/"+t+"/"+a.repoName+"/issues/"+r.number,r.comments?r.fetchComments(function(e,t){e||o(r,t)}):o(r,[]))}},{since:r,direction:"asc",sort:"created",state:"open"})}function o(e,t){var n=[];t.forEach(function(e){if(e.body){var t=e.user||{};n.push({id:e.id,body:e.body,createdAt:e.created_at,updatedAt:e.updated_at,userIcon:t.avatar_url,userLogin:t.login,userUrl:t.html_url})}}),G.duals.comments=n}if(e<=2)1==e&&(this.props.fileId&&(G=this,_?n({token:_}):i(function(e){_=e.token,n(e)})),this.defineDual("comments"));else{var a=this.state.comments;if(Array.isArray(a)){var l=[k.loadElement(["Hr",{key:"hr",margin:[40,0,30,0],style:{borderColor:"#ddd"}}])],r=[null,null,null,null];a.forEach(function(e){var t=e.updatedAt;t="string"==typeof t?new Date(t).toLocaleDateString():"",l.push(k.loadElement([["Panel",{key:"a"+e.id,height:null}],[["Div2",{key:"avatar",klass:"blog-avatar",width:50,left:null,top:null}],[["A",{key:"a",target:"_blank",href:e.userUrl}],["Img",{key:"img",klass:"avatar-img",src:e.userIcon}]]],[["Div",{key:"comment",klass:"blog-comment right",width:-.96,left:null,top:null,margin:r,borderWidth:r,padding:r}],["Div2",{key:"arrow",klass:"arrow",left:null,top:null,width:null,height:null,margin:r,borderWidth:r,padding:r}],[["P",{key:"title",klass:"comment-title",left:null,top:null,width:null,height:null,margin:r,borderWidth:r,padding:r}],[["Strong",{key:"b"}],["A",{key:"a",target:"_blank",href:e.userUrl,"html.":e.userLogin}]],["Span",{key:"info","html.":" commented at "+t}]],["MarkedDiv",{key:"txt",padding:[9,14,9,14],"html.":e.body}]]])),l.push(k.loadElement(["Div",{key:"b"+e.id,klass:"blog-clearfix",width:.9999}]))}),l.push(k.loadElement([["P",{key:"add_comm",width:.9999,padding:[4,0,20,60]}],["Button",{key:"btn","html.":"I wanna leave a comment ...",$onClick:function(e){J&&window.open(J,"_blank")}}]])),k.setChildren(this,l)}}}var g=e("react"),y=(e("react-dom"),e("shadow-widget")),v=y.$main,k=y.$utils,w=(y.$ex,y.$idSetter,"All"),b=[],C=function(e,t){},_="",x={state:{repo:"",repoDesc:"",category:w,doc:null,url:""}};x.instantTool=[{title:"Share document",show:"on_both",icon:"output/res/share.png",onClick:function(e){var t,n,i="",a=x.state,l=a.doc;l?(t=l.title||l.path.split("/").pop(),sPath=l.path,0==sPath.indexOf("md/")&&(sPath=sPath.slice(3)),n="index.html?doc="+encodeURIComponent(sPath),i="index.html?page="+encodeURIComponent(sPath)):(t=a.repoDesc||"Blog",n=a.category==w?"index.html":"index.html?cate="+encodeURIComponent(a.category));var r="Title: "+t+"\n\nURL: "+(n=o(a.repo+n).href);i&&(r+="\n\nOr: "+o(a.repo+i).href),alert(r)}}],x.menus=[{title:"Create document",onClick:function(e){k.popWin.popWindow();var t=k.loadElement(["Iframe",{key:"frame",frameBorder:"0",width:.9999,height:.9999,src:"output/menu_create.html"}]);k.popWin.showWindow(t,{width:.8,height:.9,manualClose:!0})}},{title:"Config documents",onClick:function(e){k.popWin.popWindow();var t=k.loadElement(["Iframe",{key:"frame",frameBorder:"0",width:.9999,height:.9999,src:"output/menu_config.html"}]);k.popWin.showWindow(t,{width:.8,height:.9,manualClose:!0})}}],x.msgHandle={configDone:function(e){var t=e.param[0],n=e.param[1];k.popWin.popWindow(),n&&b.length&&(t&&b[0][0].last_modify===n.last_modify||(t&&alert("The page will reload since global configure is changed by other APP."),setTimeout(C,0,n)))}};var $=/<\!-- SLIDE PAGES V[.0-9]+, DO NOT CHANGE THIS LINE\. -->/,E=null;v.$$onLoad.push(function(o){function i(){var e=document.body.getAttribute("data-loading");return"string"!=typeof e||0===parseInt(e)}function a(e){r>180?console.log("load shadow-widget system timeout"):(r+=1,setTimeout(function(){i()?setTimeout(l,100):a()},e||500))}function l(){if(y.$modules.length){for(var i=v.$$onLoad.length;y.$modules.length;)"function"==typeof(a=y.$modules.shift())&&a.call(n,e,t,n);for(var a,l=i;a=v.$$onLoad[l];l++)v.$$onLoading.push(a)}o()}if(E)return o();var r=0;a(100)});var P=!1,I=null,S=null,O=null,T=null,N=null,D=null,W=null,A=null,M=null,j=w,L=-1,R=null,H=/^\/|http:|https:/,U=0,C=function(e,t){function n(){u(e,i,"");var n=[["Panel",{key:"doc",width:.9999,height:.9999,klass:"col-reverse",style:{backgroundColor:"#fff"}}],["Iframe",{key:"preview",frameBorder:0,width:.9999,height:.9999,src:""}]],a=[["Panel",{key:"list",klass:"col-reverse",left:0,top:0,width:.9999,height:.9999,borderWidth:[0,0,1,0],style:{position:"absolute"}}],["Panel",{key:"gap",width:.9999,height:36}],["Panel",{key:"items",width:.9999,height:-1,klass:"justify_center-end-default auto-hidden-visible",style:{backgroundColor:"#fff"},$id__:s}]],l=[["Panel",{key:"tool",klass:"nowrap-default-wrap_reverse",width:.9999,height:36,borderWidth:[0,0,1,0],style:{position:"absolute",backgroundColor:"#d8d8d8",borderColor:"#ccc"}}],["Div",{key:"menu",width:40,height:.9999,title:"Main menu",$id__:h,style:{display:"none",background:"url(output/res/menu.png) no-repeat center"}}],[["Panel",{key:"cate",width:-1,height:.9999}],["P",{key:"list",klass:"right-default-align_center",width:.9999,margin:[4,0,0,0],$id__:d}]],[["P",{key:"repo",klass:"align_center-right-default",margin:[4,0,0,0],width:110,height:.9999}],["Select",{key:"sel","dual-data":[i],$id__:c}]]],p=x.instantTool||[];if(p.length){var f=p.map(function(e,t){return["Img",{key:"tool"+t,src:e.icon,title:e.title||"",style:{width:"20px",height:"20px"},"data-show":e.show||"on_both",$onClick:e.onClick,$onMouseOver:function(e){this.duals.style={opacity:"0.5"}},$onMouseOut:function(e){this.duals.style={opacity:"1"}}}]});f.unshift(["P",{key:"inst",klass:"align_center-right-default",width:20*p.length+20,height:.9999}]),l.splice(3,0,f)}o.setChild(k.loadElement(n),k.loadElement(a),k.loadElement(l),function(e){N=o.componentOf("tool"),S=o.componentOf("doc.preview"),T=o.componentOf("list"),p.length&&(O=N.componentOf("inst"),r(!1)),t&&t()})}var o=y.W(".body").component,i=e.repos_desc||e.repos_name;b.length?(b.splice(0),j=w,L=-1,!t&&R&&R.setItem("lastCate",w),o.setChild("-doc","-list","-tool","-comment",function(e){N=null,S=null,T=null,O=null,n()})):n()},B=0,G=null,F=null,J=null;v.$$onLoad.push(function(e){function t(e,t){function n(e,n,o){var i,a="";if("string"==typeof o)i=e,a=o;else{var l=e.split($);l.length>=2?(l.length>2&&console.log("warning: PINP document format error!"),i=l[0],a=l[1].trim()):i=e}t(!0,i,a,n)}for(var o="",i="",a=document.body,l=a.childNodes.length-1;l>=0;l--){var r=a.childNodes[l];if(8==r.nodeType){var s=r.nodeValue,d=s.indexOf("SLIDE PAGES: PART ");if(d>=0){var u=s[d+18];if("A"==u){o=s.slice(d+19);break}"B"==u&&(i=s.slice(d+19))}}}if(o||i)n(o,!1,i);else{var c=e.fileName.split("/"),h=c.pop();0==c.length&&c.push("md");var p=h.split(".");p.length>=2&&p.pop(),p.push("txt"),c.push(p.join("."));var f=c.join("/");k.ajax({type:"GET",url:f,dataType:"text",success:function(e,t,o){n(e,!0)},error:function(e,n){var o="error: load "+f+" failed";console.log(o),alert(o),t(!1,"","",!1)}})}}function n(e,t,n,o){var i=E.scanNodeAttr(t,"",0);if(!i||"ScenePage"!==i[0])return null;var a=i[1],l=a.key;l&&"string"==typeof l||(l="auto"+(e.comps.length+e.removeNum+o)),a["keyid."]=a.key=l;var r=y.$staticNodes.length,s=E.scanPreCode(t,"ScenePage["+o+"]",!0);return y.$staticNodes.length>r&&(a["hasStatic."]=!0),s.unshift(n,a),g.createElement.apply(null,s)}if(E||y.__design__)return e();E=y.$creator,window.addEventListener("message",f,!1);var o=function(e){var t={isFile:"file:"==e.protocol,isLocal:"localhost"==e.hostname||"127.0.0.1"==e.hostname,fileName:e.pathname.split("/").pop()||"index.html",isGitio:e.hostname.indexOf(".github.io")>0};if(t.isGitio){t.vendor=e.hostname.split(".")[0];var n=e.pathname.split("/");""===n[0]&&n.shift(),t.repo=n[0]}return t}(window.location),a=function(e){var t={};return e.split("&").forEach(function(e){if(e){var n=e.split("="),o=n[0].trim();o&&(t[o]=(n[1]||"").trim())}}),t}(window.location.search.slice(1));return a.page&&(o.fileName=decodeURIComponent(a.page)),a.tm&&(o.fileTime=parseFloat(a.tm)),a.token&&(o.token=a.token),"index.html"!=o.fileName?function(){function i(e){var t=/\$=['"]\.pinp\.doc_info\.title["']/m.exec(e);if(t){var n,o=e.indexOf(">",t.index);if(o>0&&(n=e.indexOf("<",o))>0)return e.slice(o+1,n).trim()}return""}var l=null,r=window.parent.window&&window.parent.window!==window;t(o,function(t,a,s,d){if(!t)return e();if(d){var u=i(a+"\n"+s);u&&(document.title=u)}var c=y.W(".body").component;if(o.isGitio){var h=o.fileName.split("/").pop().split(".")[0];o.token&&(_=o.token),a+='\n\n<div $=".body.comment" file-id="'+h+'"></div>\n';var p=k.loadElement(["Panel",{key:"comment",width:.9999,height:null,style:{display:"none"},$id__:m,fileTime:o.fileTime||0,vendor:o.vendor,repo:o.repo}]);c.setChild(p)}var f=[];if(s){var g=k.getWTC("ScenePage").ScenePage,w="",b=[],C=document.createElement("div");C.innerHTML=s;for(var x,$=0;x=C.children[$];$++)if("DIV"==x.nodeName){var P=n(c.$gui,x,g,f.length);if(P){var I=(P.props["keyid."]||"")+"";!P.props.noShow&&I&&b.push(I),0==f.length&&(w=I),f.push(P)}}if(f.length){if(w&&0!=b.length)return r&&b.length>0&&document.body.addEventListener("slideenter",function(e){var t=e.pageKey,n=e.pageIndex,o=k.pageCtrl.isFirstEnter(e.target),i="[PROJECT_NAME]"+JSON.stringify({method:"enterPage",param:[n,t,o]});window.parent.window.postMessage(i,"*")},!1),f.push(function(t){function n(e,t){l=e,setTimeout(function(){e.duals["html."]=t},300)}function o(e){var t=[];b.forEach(function(e){var n=c.componentOf(e);n&&t.push([e,n])}),k.pageCtrl&&k.pageCtrl.destory(),k.pageCtrl=new E.pageCtrl_(t),l&&1==t.length&&(k.pageCtrl.config={size:"0x0",noSidebar:1,noKeypress:1,noFrame:1,noTrans:1},c.listen("innerSize",function(e,t){i.isHooked&&(i.duals.width=e[0],i.duals.height=e[1])})),e()}var i=null;if(b[0]==w){i=c.componentOf(w);var s=a&&(a.length>24||a.trim());if(i&&s){var d=i.componentOf("marked_doc");if(d)d.props["marked."]?n(d,a):console.log("error: marked_doc should be MarkedDiv"),v.$$onLoading.push(o),e();else{var u={key:"marked_doc",klass:"auto-hidden-visible",padding:[24,6,6,6],margin:0,left:-.5,top:-.5,width:.9999,height:.9999};r&&(u.$onScroll=function(e){var t="[PROJECT_NAME]"+JSON.stringify({method:"markScroll",param:[e.target.scrollTop]});window.parent.window.postMessage(t,"*")}),i.setChild(k.loadElement(["MarkedDiv",u]),function(t){(d=i.componentOf("marked_doc"))&&n(d,a),v.$$onLoading.push(o),e()})}return}}v.$$onLoading.push(o),e()}),void c.setChild.apply(c,f);f=[]}}var S=k.loadElement(["MarkedDiv",{key:"marked_doc",width:.9999,height:.9999,margin:0,padding:[24,6,6,6],klass:"auto-hidden-visible",style:{backgroundColor:"#fff"}}]);c.setChild(S,function(e){var t=c.componentOf("marked_doc");t&&setTimeout(function(){t.duals["html."]=a},300)}),e()}),a.page&&window.addEventListener("message",function(e){try{"object"==typeof e&&e.data?(e=e.data,e=JSON.parse(e.slice(14))):e=null}catch(t){e=null,console.log(t)}if("object"==typeof e&&"updateMark"==e.method){var t=e.param[0];if(l&&"string"==typeof t){var n=-1,o=!1,i=l.getHtmlNode();i&&(n=i.scrollTop)>6&&n+i.clientHeight>=i.scrollHeight-20&&(o=!0),l.duals["html."]=t,n>10&&setTimeout(function(){i.scrollTop=o?Math.max(0,i.scrollHeight-i.clientHeight):n},800)}}})}():(o.isGitio&&!_&&i(function(e){_=e.token}),p(o,a,e))})});